<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <title>{{ seo_title if seo_title else "Top 3 Best Options" }}</title>

  <meta name="description"
        content="{{ seo_desc if seo_desc else 'Compare top 3 best products before buying' }}">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FKG2FW3J14"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FKG2FW3J14');
  </script>

  <!-- JSON-LD Structured Data (BreadcrumbList) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ BASE_URL }}/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ breadcrumb_category or category }}",
        "item": "{{ BASE_URL }}/best-{{ category|lower }}s"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "{{ breadcrumb_use or use }}",
        "item": "{{ request.url }}"
      }
    ]
  }
  </script>

  <!-- JSON-LD Product Collection Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "itemListElement": [
      {% for item in top3 %}
      {
        "@type": "ListItem",
        "position": {{ loop.index }},
        "item": {
          "@type": "Product",
          "name": "{{ item.name }}",
          "description": "{{ item.reason }}",
          "price": "{{ item.price }}",
          "priceCurrency": "INR",
          "image": "{{ item.image }}",
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "{{ (item.gaming + item.camera + item.battery + item.performance + item.display) / 5 }}",
            "bestRating": "10",
            "worstRating": "1"
          }
        }
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    ]
  }
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 0;
    }

    /* ===== PRICE DISCLAIMER ===== */
    .price-disclaimer {
      background: #fffbea;
      border-left: 4px solid #ffc107;
      padding: 12px 16px;
      margin: 0 0 20px 0;
      border-radius: 4px;
      font-size: 13px;
      color: #856404;
      text-align: center;
    }

    .price-disclaimer strong {
      font-weight: 600;
    }

    /* ===== BREADCRUMBS ===== */
    .breadcrumbs {
      background: #f9f9f9;
      padding: 12px 0;
      margin: 0;
      border-bottom: 1px solid #ddd;
      font-size: 14px;
    }

    .breadcrumbs-container {
      width: 88%;
      margin: 0 auto;
      padding: 8px 0;
    }

    .breadcrumbs a {
      color: #007bff;
      text-decoration: none;
      margin: 0 4px;
    }

    .breadcrumbs a:hover {
      text-decoration: underline;
    }

    .breadcrumbs span {
      color: #666;
      margin: 0 4px;
    }

    .container {
      width: 88%;
      margin: auto;
      padding-bottom: 50px;
    }

    h1 {
      text-align: center;
      margin: 35px 0 10px;
    }

    h2 {
      text-align: center;
      margin-top: 40px;
    }

    .subtitle {
      text-align: center;
      color: #555;
      margin-bottom: 15px;
      font-size: 17px;
    }

    .intro {
      text-align: center;
      max-width: 900px;
      margin: 0 auto 40px;
      color: #444;
      line-height: 1.7;
      font-size: 16px;
    }

    /* ===== CARD GRID ===== */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
    }

    .card {
      background: #ffffff;
      padding: 22px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }

    /* ===== BADGES ===== */
    .badge {
      position: absolute;
      top: 18px;
      left: 18px;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: bold;
      color: #fff;
    }

    .top-choice {
      background: linear-gradient(135deg, #28a745, #5dd39e);
    }

    .best-alternative {
      background: linear-gradient(135deg,#007bff,#0056b3);
    }

    .good-option {
      background: linear-gradient(135deg,#6c757d,#495057);
    }

    /* ===== IMAGE ===== */
    .product-img {
      display: block;
      width: 100%;
      max-width: 260px;
      height: auto;
      max-height: 220px;
      object-fit: contain;
      margin: 14px auto 12px;
    }

    .product-image {
      width: 100%;
      text-align: center;
      margin-bottom: 12px;
    }

    .product-image img {
      max-width: 100%;
      height: auto;
      max-height: 250px;
      object-fit: contain;
      border-radius: 12px;
    }

    .card h3 {
      margin-bottom: 10px;
      font-size: 20px;
    }

    .spec {
      margin: 8px 0 12px;
      font-size: 14px;
      color: #333;
    }

    .spec-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-weight: 600;
      color: #222;
      font-size: 14px;
    }

    .spec-value {
      color: #444;
      font-weight: 700;
      font-size: 13px;
    }

    .spec-bar {
      background: #eee;
      height: 10px;
      border-radius: 999px;
      overflow: hidden;
    }

    .spec-fill {
      height: 100%;
      background: linear-gradient(90deg,#4caf50,#8bc34a);
      width: 0%;
      transition: width 0.45s ease;
    }

    .rating {
      background: #eee;
      height: 8px;
      border-radius: 5px;
      overflow: hidden;
      margin: 10px 0 5px;
    }

    .rating-bar {
      height: 100%;
      background: linear-gradient(90deg,#4caf50,#8bc34a);
    }

    .reason {
      background: #f1f7ff;
      padding: 10px;
      border-left: 4px solid #007bff;
      margin-top: 12px;
      border-radius: 6px;
      font-size: 14px;
    }

    .price {
      font-size: 18px;
      font-weight: bold;
      margin-top: 14px;
      color: #2e7d32;
    }

    /* ===== BUY BUTTONS ===== */
    .buy-buttons {
      display: flex;
      gap: 12px;
      margin-top: 18px;
    }

    .amazon, .flipkart {
      flex: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 16px;
      border-radius: 12px;
      color: #fff;
      text-decoration: none;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }

    .amazon {
      background: linear-gradient(90deg,#ff9f00,#ff6f00);
      border: 1px solid rgba(0,0,0,0.04);
    }

    .flipkart {
      background: linear-gradient(90deg,#3b82f6,#1e5bd8);
      border: 1px solid rgba(0,0,0,0.04);
    }

    .amazon:hover, .flipkart:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      text-decoration: none;
    }

    /* ===== TRUST SECTION ===== */
    .trust-section {
      margin-top: 32px;
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 8px 26px rgba(0,0,0,0.04);
      font-size: 15px;
    }

    .trust-section h2 {
      margin: 0 0 8px;
      text-align: center;
      font-size: 18px;
    }

    .trust-desc {
      text-align: center;
      color: #555;
      margin-bottom: 12px;
    }

    .trust-list {
      list-style: none;
      padding: 0;
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      gap: 8px;
    }

    .trust-item {
      padding-left: 28px;
      position: relative;
      color: #333;
    }

    .trust-item::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      top: 0;
      color: #28a745;
      font-weight: bold;
    }

    /* ===== OTHER OPTIONS ===== */
    .other-list {
      margin-top: 35px;
      background: #ffffff;
      border-radius: 14px;
      padding: 20px;
    }

    .other-item {
      padding: 12px 0;
      border-bottom: 1px solid #ddd;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 15px;
    }

    .other-item:last-child {
      border-bottom: none;
    }

    /* ===== INTERNAL LINKS ===== */
    .internal-links {
      margin-top: 45px;
      padding: 25px;
      background: #ffffff;
      border-radius: 14px;
      text-align: center;
      font-size: 15px;
    }

    .internal-links a {
      margin: 0 8px;
      text-decoration: none;
      color: #007bff;
      font-weight: bold;
    }

    .internal-links a:hover {
      text-decoration: underline;
    }
    /* ===== MOBILE OPTIMIZATION ===== */
    @media (max-width: 768px) {

      .container {
        width: 94%;
      }

      h1 {
        font-size: 24px;
        line-height: 1.3;
      }

      .subtitle {
        font-size: 14px;
      }

      .intro {
        font-size: 14px;
        margin-bottom: 20px;
      }

      .cards {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .card {
        width: 100%;
        padding: 18px;
      }

      .buy-buttons {
        flex-direction: column;
      }

      .amazon,
      .flipkart {
        width: 100%;
        font-size: 15px;
      }

      .price {
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
<div style="background:#111;color:#fff;padding:15px;text-align:center;">
  UI TEST: Changes Working üöÄ
</div>

<!-- Breadcrumb Navigation -->
<nav class="breadcrumbs" aria-label="Breadcrumb">
  <div class="breadcrumbs-container">
    <a href="/">Home</a>
    <span>/</span>
    <a href="/best-{{ category|lower }}s">{{ breadcrumb_category or category }}</a>
    <span>/</span>
    <span>{{ breadcrumb_use or use }}</span>
  </div>
</nav>

<div class="container">

{% if top3|length == 0 %}
  <h1>No Results Found</h1>
  <p style="text-align:center;">
    {{ message if message else "Try increasing your budget or changing preference." }}
  </p>

{% else %}

  <h1>Top 3 {{ category }} Under ‚Çπ{{ budget }}</h1>
  <div class="subtitle">Best for {{ use }}</div>

  <div class="price-disclaimer">
    <strong>‚ö†Ô∏è Note:</strong> Prices are indicative and sourced from available data. Please check <strong>Amazon/Flipkart</strong> links below for the latest prices and availability before purchasing.
  </div>

  <div class="intro">
    We compared performance, {{ use|lower }}, battery life and overall value
    to bring you the <strong>best {{ category|lower }} options</strong>
    available in India right now.
  </div>

  <div class="cards">
    {% for item in top3 %}
    <div class="card">

        {% if item.badge %}
        <div class="badge {{ item.badge|lower|replace(' ', '-') }}">
          {{ item.badge }}
        </div>
          {% if item.image %}
          <div class="product-image">
            <img src="{{ item.image }}" alt="{{ item.name }}" loading="lazy">
          </div>
          {% endif %}
        {% else %}
          {% if item.image %}
          <div class="product-image">
            <img src="{{ item.image }}" alt="{{ item.name }}" loading="lazy">
          </div>
          {% endif %}
        {% endif %}

        <h3>#{{ loop.index }} {{ item.name }}</h3>

      {% for key, value in item.items() %}
        {% if key not in ["name","price","reason","amazon","flipkart","badge","image"] and value is number %}
          <div class="spec">
            <div class="spec-label">
              <span>{{ key.capitalize() }}</span>
              <span class="spec-value">{{ value }}/10</span>
            </div>
            <div class="spec-bar" role="progressbar" aria-valuemin="0" aria-valuemax="10" aria-valuenow="{{ value }}">
              <div class="spec-fill" style="width: {{ value * 10 }}%"></div>
            </div>
          </div>
        {% endif %}
      {% endfor %}

      {% if item.overall %}
      <div class="rating">
        <div class="rating-bar" style="width: {{ item.overall * 10 }}%"></div>
      </div>
      <small>Overall Score: {{ item.overall }}/10</small>
      {% endif %}

      {% if item.reason %}
      <div class="reason">
        <strong>Why buy:</strong> {{ item.reason }}
      </div>
      {% endif %}

      <div class="price">‚Çπ{{ item.price }}</div>

      <div class="buy-buttons">
        <a class="amazon" href="{{ item.amazon if item.amazon else '/go/amazon' }}" target="_blank">
            Check Price on Amazon
          </a>
          <a class="flipkart" href="{{ item.flipkart if item.flipkart else '/go/flipkart' }}" target="_blank">
            Check Price on Flipkart
          </a>
      </div>

    </div>
    {% endfor %}
  </div>

  <div class="trust-section" aria-labelledby="trust-heading">
    <h2 id="trust-heading">Why trust our comparison</h2>
    <p class="trust-desc">We analyse specs, real-world performance, user feedback and pricing across top retailers to recommend the best options.</p>
    <ul class="trust-list">
      <li class="trust-item"><strong>Independent scoring:</strong> Data-driven methodology with clear metrics.</li>
      <li class="trust-item"><strong>Updated regularly:</strong> Prices and availability are checked frequently.</li>
      <li class="trust-item"><strong>Transparent sources:</strong> We link to retailer pages and show our scoring criteria.</li>
    </ul>
  </div>

  <div class="trust-section">
    <h2>Why trust our comparison</h2>
    <p class="trust-desc">We analyse specifications, real-world performance, user feedback and retailer pricing to recommend the best options.</p>
    <ul class="trust-list">
      <li class="trust-item"><strong>Independent scoring:</strong> Data-driven methodology with clear, repeatable metrics.</li>
      <li class="trust-item"><strong>Updated regularly:</strong> Prices and availability are checked frequently to keep recommendations current.</li>
      <li class="trust-item"><strong>Transparent sources:</strong> Direct links to retailer pages and a visible scoring system are provided.</li>
    </ul>
  </div>

  {% if others|length > 0 %}
  <h2>Other Good Options</h2>
  <div class="other-list">
    {% for item in others %}
    <div class="other-item">
      <span>{{ item.name }} ‚Äì ‚Çπ{{ item.price }}</span>
      <a href="{{ item.amazon if item.amazon else '/go/amazon' }}" target="_blank">Amazon</a>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="internal-links">
    <strong>Popular Searches:</strong><br><br>
    <a href="/mobile/8000/overall">Mobile under ‚Çπ8,000</a> |
    <a href="/mobile/10000/overall">Mobile under ‚Çπ10,000</a> |
    <a href="/mobile/15000/overall">Mobile under ‚Çπ15,000</a> |
    <a href="/mobile/20000/overall">Mobile under ‚Çπ20,000</a>
  </div>

{% endif %}

</div>
</body>
</html>
